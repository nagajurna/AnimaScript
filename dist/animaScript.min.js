"use strict";function AnimaScript(a,b){if(void 0===a)throw new TypeError("Invalid AnimaScript() argument. Element must be defined");if(!a.tagName)throw new TypeError("Invalid AnimaScript() argument. Element must be HTML element");this.element=a,void 0!==b?(void 0===b.unit?this.unit="c":this.unit=b.unit,void 0===b.type?this.type="n":this.type=b.type,void 0===b.delay?this.delay=250:this.delay=b.delay,void 0===b.duration?this.duration=1e3:this.duration=b.duration,void 0===b.callback|"function"!=typeof b.callback?this.callback=null:this.callback=callback):(this.unit="c",this.type="n",this.delay=250,this.duration=1e3,this.callback=null),this.text=this.getCharacters(),this.reversedText=this.getCharacters().reverse(),this.charactersCount=this.getCounts().characters,this.wordsCount=this.getCounts().words}AnimaScript.prototype.setUnit=function(a){return this.unit=a,this},AnimaScript.prototype.setType=function(a){return this.type=a,this},AnimaScript.prototype.setDelay=function(a){return this.delay=a,this},AnimaScript.prototype.setDuration=function(a){return this.duration=a,this},AnimaScript.prototype.setCallback=function(a){return this.callback=a,this},AnimaScript.prototype.getTextNodes=function(){var a=[],b=function(c){for(var d=0;d<c.childNodes.length;d++)if(3==c.childNodes[d].nodeType){var e={};e.parent=c.childNodes[d].parentNode,e.nodeIndex=d,e.value=c.childNodes[d].nodeValue.split(""),a.push(e)}else b(c.childNodes[d]);return a};return b(this.element)},AnimaScript.prototype.getCharacters=function(){for(var a=this.getTextNodes(),b=[],c=0;c<a.length;c++)for(var d=0;d<a[c].value.length;d++){var e={};e.value=a[c].value[d],e.element=a[c].parent,e.nodeIndex=a[c].nodeIndex,b.push(e)}return b},AnimaScript.prototype.getCounts=function(){for(var a=this.getTextNodes(),b={},c=[],d=0;d<a.length;d++)c=c.concat(a[d].value);b.characters=c.length;var e=c.toString(),f=e.match(/ |\u00A0/g);return b.words=f.length+1,b},AnimaScript.prototype.emptyNodes=function(){var a=this.element,b=this.getTextNodes(),c=window.getComputedStyle(a);"inline"!==c.display&&(a.style.width=a.clientWidth+"px",a.style.height=a.clientHeight+"px","0px"!==c.marginTop&&(a.style.marginTop=c.marginTop),"0px"!==c.marginBottom&&(a.style.marginBottom=c.marginBottom)),a.style.visibility="hidden";for(var d=0;d<b.length;d++)b[d].parent.childNodes[b[d].nodeIndex].nodeValue=""},AnimaScript.prototype.spellCharacters=function(){function a(){i.style.visibility="visible",k=window.setInterval(function(){b()},l)}function b(){1==r?c():d()}function c(){var a;p>=0?(a=o[p],a.element.childNodes[a.nodeIndex].nodeValue=a.value+a.element.childNodes[a.nodeIndex].nodeValue,p-=1,r=!1):(window.clearInterval(k),n&&n())}function d(){var a;q<=o.length-1?(a=o[q],a.element.childNodes[a.nodeIndex].nodeValue+=a.value,q+=1,r=!0):(window.clearInterval(k),n&&n())}function e(){i.style.visibility="visible",k=window.setInterval(function(){f()},l)}function f(){var a;p<=o.length-1?(a=o[p],a.element.childNodes[a.nodeIndex].nodeValue=a.value+a.element.childNodes[a.nodeIndex].nodeValue,p+=1):(window.clearInterval(k),n&&n())}function g(){i.style.visibility="visible",k=window.setInterval(function(){h()},l)}function h(){var a;p<=o.length-1?(a=o[p],a.element.childNodes[a.nodeIndex].nodeValue+=a.value,p+=1):(window.clearInterval(k),n&&n())}this.emptyNodes();var i=this.element;if("number"!=typeof this.delay)throw new TypeError("Invalid Animascript() argument. Delay must be a number");var j=this.delay;if("number"!=typeof this.duration)throw new TypeError("Invalid Animascript() argument. Duration must be a number");var k,l=this.duration/this.charactersCount,m=this.type,n=this.callback;if("m"==m){var o=this.text,p=Math.ceil(o.length/2)-1,q=p+1,r=!0;window.setTimeout(function(){a()},j)}else if("r"==m){var p=0,o=this.reversedText;window.setTimeout(function(){e()},j)}else{if("n"!=m)throw new TypeError("Invalid AnimaScript() argument. Type must be n, r or m");var o=this.text,p=0;window.setTimeout(function(){g()},j)}},AnimaScript.prototype.spellWords=function(){function a(){i.style.visibility="visible",k=window.setInterval(function(){b()},l)}function b(){1==r?c():d()}function c(){var a;do{if(!(p>=0)){window.clearInterval(k),n&&n();break}a=o[p],a.element.childNodes[a.nodeIndex].nodeValue=a.value+a.element.childNodes[a.nodeIndex].nodeValue,p-=1,r=!1}while(" "!=a.value&&" "!=a.value)}function d(){var a;do{if(!(q<=o.length-1)){window.clearInterval(k),n&&n();break}a=o[q],a.element.childNodes[a.nodeIndex].nodeValue+=a.value,q+=1,r=!0}while(" "!=a.value&&" "!=a.value)}function e(){i.style.visibility="visible",k=window.setInterval(function(){f()},l)}function f(){var a;do{if(!(p<=o.length-1)){window.clearInterval(k),n&&n();break}a=o[p],a.element.childNodes[a.nodeIndex].nodeValue=a.value+a.element.childNodes[a.nodeIndex].nodeValue,p+=1}while(" "!=a.value&&" "!=a.value)}function g(){i.style.visibility="visible",k=window.setInterval(function(){h()},l)}function h(){var a;do{if(!(p<=o.length-1)){window.clearInterval(k),n&&n();break}a=o[p],a.element.childNodes[a.nodeIndex].nodeValue+=a.value,p+=1}while(" "!=a.value&&" "!=a.value)}this.emptyNodes();var i=this.element;if("number"!=typeof this.delay)throw new TypeError("Invalid Animascript() argument. Delay must be a number");var j=this.delay;if("number"!=typeof this.duration)throw new TypeError("Invalid Animascript() argument. Duration must be a number");var k,l=this.duration/this.wordsCount,m=this.type,n=this.callback;if("m"==m){var o=this.text,p=Math.ceil(o.length/2)-1,q=p+1,r=!0;window.setTimeout(function(){a()},j)}else if("r"==m){var p=0,o=this.reversedText;window.setTimeout(function(){e()},j)}else{if("n"!=m)throw new TypeError("Invalid AnimaScript() argument. Type must be n, r or m");var o=this.text,p=0;window.setTimeout(function(){g()},j)}},AnimaScript.prototype.spell=function(){if("c"==this.unit)return this.spellCharacters();if("w"==this.unit)return this.spellWords();throw new TypeError("Invalid AnimaScript() argument. unit must be c or w")};